







NA AULA ANTERIOR, CRIAMOS 1 READER ACCOUNT 

COM ESTA SINTAXE:




CREATE MANAGED ACCOUNT READER_TEST 
    ADMIN_NAME=SOME_RANDOM_GUY
    ADMIN_PASSWORD=Exemplo123
    TYPE=READER;













--> AÍ PEGAMOS A URL 

DESSA CONTA,





vista na column de "accountUrl"...












--> certo... ASSIM QUE VC TIVER CRIADO ESSA READER ACCOUNT,

VC PODE PENSAR SOBRE ELA COMO SE ELA 

FOSSE 1 CONTA SNOWFLAKE 



TOTALMENTE SEPARADA,











MAS COM 1 DIFERENCA ESSENCIAL:














A DIFERENCA É:










A CONTA READER ACCOUNT É MARCADA COMO "CHILD" 


DAQUELA PARENT ACCOUNT... E TODA BILLING QUE ACONTECE NA 

CHILD ACCOUNT, 

DATA PROCESSADA NESSA CHILD ACCOUNT,





ELA APARECERÁ NA PARENT ACCOUNT...








----> OS CREDITS DA WAREHOUSE, A BILL,

QUE VEM COM ESSA READER ACCOUNT,


SEŔA BILLED AO PARENT ACCOUNT...












OK... COM ISSO EM MENTE,



CONTINUAMOS...









CRIADA ESSA READER ACCOUNT, COM ISTO:









CREATE MANAGED ACCOUNT READER_TEST 
    ADMIN_NAME=SOME_RANDOM_GUY
    ADMIN_PASSWORD=Exemplo123
    TYPE=READER;









QUEREMOS FAZER SHARE DE ALGUMA DATABASE/SCHEMA/TABLE 


COM ESSA 
READER ACCOUNT...











O PROFESSOR VAI ESCREVENDO ASSIM:











CREATE DATABASE READER_SALES;





CREATE TABLE CUSTOMER 
AS SELECT * FROM XXX;

















--> AÍ ELE CRIA 1 SHARE....











CREATE SHARE SALES_S;





GRANT USAGE ON DATABASE READER_sALES TO SHARE SALES_S;
GRANT USAGE ON SCHEMA READER_SALES.PUBLIC TO SHARE SALES_;
GRANT SELECT ON TABLE READER_SALES.PUBLIC.CUSTOMER TO SHARE SALES_S;









ALTER SHARE SALES_S
ADD ACCOUNTS=<reader_account_id>













--> ADICICONADA ESSA READER ACCOUNT À SHARE DA PRODUCER ACCOUNT,



DEVEMOS LOGGAR NA READER ACCOUNT,



E AÍ RODAR 



ESTES COMANDOS:











-- CREATE REFERENCE DATABASE 

CREATE DATABASE READER_SALES FROM SHARE <producer_account>.sales_s;









-- CREATE WAREHOUSE FOR PRODUCER ACCOUNT..


CREATE OR REPLACE WAREHOUSE READER_WH
WITH WAREHOUSE_SIZE='X-SMALL'
AUTO_SUSPEND=180
AUTO_RESUME=TRUE 
INITIALLY_SUSPENDED=TRUE;







GRANT USAGE ON WAREHOUSE READER_WH TO ROLE PUBLIC;
GRANT USAGE ON WAREHOUSE READER_WH TO ROLE SYSADMIN;
GRANT ALL ON WAREHOUSE READER_WH TO ROLE SYSADMIN;














--> COMO ESSA É UMA CONTA "SEPARADA",


PODEMOS CRIAR WAREHOUSES PARA ELA,


E AÍ 



CRIAR ROLES DENTRO DESSA ACCOUNT...









--> mesma coisa que uma account normal...







--> a billing ficará vinculada à parent account....










--> NA PRÓXIMA AULA VEREMOS ALGUMAS DAS RESTRICOES 

COLOCADAS NESSA READER ACCOUNT...




