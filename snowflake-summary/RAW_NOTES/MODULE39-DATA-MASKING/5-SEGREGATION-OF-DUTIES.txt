

--> QUANDO ADICIONAMOS ACCESS CONTROL 


à FUNCIONALIDADE DE DATA MASKING,

ISSO VAI RESULTAR 



NA SEGREGATION DE 


ACTIVITIES...













--> MAS ANTES DISSO, TEMOS QUE 

IMPLEMENTAR A ROLE HIERARCHY...









IMAGINE 

ESTE 



ESQUEMA:

















ACCOUNT ADMIN 






-> SYSADMIN...











--> VAMOS CRIAR O ROLE DE "SECURITY_OFFICER"...







--> TEREMOS TAMBÉM 




3 ROLES EXTRAS,










"ANALYST"





"QA"






"CONTRACTOR"...














-----> ANALYST, QA E CONTRACTOR 



TERAO APENAS READ ACCESS...










O SECURITY_OFFICER


TERÁ 



APLICARÁ AS MASKING RULES,




E VAI TER PRIVILEGES 



DE READ E WRITE....
















--> O PROFESSOR CRIA ESTES ROLES, E ESTES PRIVILEGES A ELES:




















--- CREATE ROLE SANDBOX -----






CREATE ROLE ANALYST;
CREATE ROLE CONTRACTOR;
CREATE ROLE QA;









CREATE USER MIKE PASSWORD='ABC123'
DEFAULT_ROLE='ANALYST' MUST_CHANGE_PASSWORD=FALSE;


CREATE USER JOHN PASSWORD='ABC123'
DEFAULT_ROLE='CONTRACTOR' MUST_CHANGE_PASSWORD=FALSE;


CREATE USER VEER PASSWORD='ABC123'
DEFAULT_ROLE='QA' MUST_CHANGE_PASSWORD=FALSE;

















----> certo..








estamos criando esses 3 roles...









criamos database e schema:











CREATE DATABASE PROD;


USE DATABASE PROD 



CREATE SCHEMA TRIALS;










GRANT USAGE ON DATABASE PROD TO ROLE SECURITY_OFFICER;
GRANT USAGE ON SCHEMA PROD.TRIALS TO ROLE SECURITY_OFFICER;




GRANT USAGE ON DATABASE PROD TO ROLE ANALYST;
GRANT USAGE ON SCHEMA TRIALS TO ROLE ANALYST;



GRANT USAGE ON DATABASE PROD TO ROLE CONTRACTOR;
GRANT USAGE ON SCHEMA PROD.TRIALS TO ROLE CONTRATOR;














QUAL SERÁ A TABLE?















-> BEM, NAO IMPORTA....





GRANT ALL PRIVILEGES ON DATABASE PROD TO ROLE SECURITY_OFFICER;

GRANT SELECT ON ALL TABLES IN SCHEMA PROD.TRIALS
TO ROLE ANALYST;


GRANT SELECT ON ALL TABLES IN SCHEMA PROD.TRIALS
TO ROLE QA;


GRANT SELECT ON ALL TABLES IN SCHEMA PROD.TRIALS
TO ROLE CONTRACTOR;















-----> OK... 





TAMBÉM CRIAMOS UMA TABLE,

DE NOME PATIENT,

TIPO ASSIM









CREATE TABLE PATIENT (
    PATIENT_NAME VARCHAR,
    DOB DATE,
    DIAGNOSIS VARCHAR,
    ADR_LINE_1 VARCHAR,
    ADR_LINE_2 VARCHAR,
    CITY VARCHAR,
    ZIP NUMBER,
    STATE VARCHAR,
    POS NUMBER,
    SERVICE_START_DATE DATE,
    SERVICE_END_DATE DATE,
    PROVIDER_NAME VARCHAR
);









NO ROLE DE SECURITY_OFFICER,


PODEREMOS 

RODAR 


"SELECT * FROM PATIENT;"













RODAMOS 











USE ROLE SECURITY_OFFICER;



SELECT * FROM PATIENT;














--> O SECURITY OFFICER TERÁ ACESSO COMPLETO 
A ESSA TABLE..








--> AGORA VAMOS QUERER FAZER MASK DESSA TABLE,

PARA CADA 
1 

DOS 

ROLES...

















NA PRÓXIMA LECTURE,

VEREMOS COMO APLICAR MASKING ROLES 



USANDO 


O ROLE DE "SECURITY_OFFICER"...










DEFINIREMOS ESSAS RULES NA PRÓXIMA LECTURE...



